/*! QUAIL quailjs.org | quailjs.org/license */(function(t){t.fn.quail=function(t){return this.length?(e.options=t,e.html=this,e.run(),this):this};var e={options:{},testCallbacks:{placeholder:"placeholderTest",label:"labelTest",header:"headerOrderTest",event:"scriptEventTest",labelProximity:"labelProximityTest",color:"colorTest"},testabilityTranslation:{0:"suggestion",.5:"moderate",1:"severe"},html:{},strings:{},accessibilityResults:{},accessibilityTests:{},textSelector:"p, h1, h2, h3, h4, h5, h6, div, pre, blockquote, aside, article, details, summary, figcaption, footer, header, hgroup, nav, section, strong, em, del, i, b",suspectPHeaderTags:["strong","b","em","i","u","font"],suspectPCSSStyles:["color","font-weight","font-size","font-family"],run:function(){if(e.options.reset&&(e.accessibilityResults={}),e.options.accessibilityTests!==void 0?e.accessibilityTests=e.options.accessibilityTests:t.ajax({url:e.options.jsonPath+"/tests.json",async:!1,dataType:"json",success:function(t){"object"==typeof t&&(e.accessibilityTests=t)}}),e.options.customTests!==void 0)for(var i in e.options.customTests)e.accessibilityTests[i]=e.options.customTests[i];if("string"==typeof e.options.guideline&&t.ajax({url:e.options.jsonPath+"/guidelines/"+e.options.guideline+".json",async:!1,dataType:"json",success:function(t){e.options.guideline=t}}),e.options.guideline===void 0){e.options.guideline=[];for(var s in e.accessibilityTests)e.options.guideline.push(s)}if(e.runTests(),e.options.complete!==void 0){var a={totals:{severe:0,moderate:0,suggestion:0},results:e.accessibilityResults};t.each(a.results,function(t,i){a.totals[e.testabilityTranslation[e.accessibilityTests[t].testability]]+=i.length}),e.options.complete(a)}},testFails:function(t,i,s){if(s=s||{},(void 0===e.options.preFilter||e.options.preFilter(t,i,s)!==!1)&&(e.accessibilityResults[t].push(i),e.options.testFailed!==void 0)){var a=e.accessibilityTests[t].testability!==void 0?e.accessibilityTests[t].testability:"unknown";e.options.testFailed({element:i,testName:t,testability:a,severity:e.testabilityTranslation[a],options:s})}},runTests:function(){t.each(e.options.guideline,function(i,s){if(void 0!==e.accessibilityTests[s]){var a=e.accessibilityTests[s].type;e.accessibilityResults[s]===void 0&&(e.accessibilityResults[s]=[]),"selector"===a&&e.html.find(e.accessibilityTests[s].selector).each(function(){e.testFails(s,t(this))}),"custom"===a&&("object"==typeof e.accessibilityTests[s].callback||"function"==typeof e.accessibilityTests[s].callback?e.accessibilityTests[s].callback(e):e[e.accessibilityTests[s].callback]!==void 0&&e[e.accessibilityTests[s].callback]()),e[e.testCallbacks[a]]!==void 0&&e[e.testCallbacks[a]](s,e.accessibilityTests[s])}})},isUnreadable:function(t){return"string"!=typeof t?!0:t.trim().length?!1:!0},isDataTable:function(e){if(3>e.find("tr").length)return!1;if(e.find("th[scope]").length)return!0;var i=e.find("tr:has(td)").length,s=e.find("td[rowspan], td[colspan]"),a=!0;if(s.length){var n={};s.each(function(){n[t(this).index()]===void 0&&(n[t(this).index()]=0),n[t(this).index()]++}),t.each(n,function(t,e){i>e&&(a=!1)})}var o=e.find("table");if(o.length){var r={};o.each(function(){var e=t(this).parent("td").index();e!==!1&&r[e]===void 0&&(r[e]=0),r[e]++}),t.each(r,function(t,e){i>e&&(a=!1)})}return a},validURL:function(t){return-1===t.search(" ")?!0:!1},loadString:function(i){return e.strings[i]!==void 0?e.strings[i]:(t.ajax({url:e.options.jsonPath+"/strings/"+i+".json",async:!1,dataType:"json",success:function(t){e.strings[i]=t}}),e.strings[i])},cleanString:function(t){return t.toLowerCase().replace(/^\s\s*/,"")},loadHasEventListener:function(){void 0===jQuery.hasEventListener&&t.ajax({url:e.options.jsonPath+"/../../libs/jquery.hasEventListener/jquery.hasEventListener-2.0.3.min.js",async:!1,dataType:"script"})},loadPixelToEm:function(){void 0===jQuery.toPx&&t.ajax({url:e.options.jsonPath+"/../../libs/jquery.pxToEm/pxem.jQuery.js",async:!1,dataType:"script"})},placeholderTest:function(i,s){e.loadString("placeholders"),e.html.find(s.selector).each(function(){var a;if(s.attribute!==void 0){if(t(this).attr(s.attribute)===void 0||"tabindex"===s.attribute&&!t(this).attr(s.attribute))return e.testFails(i,t(this)),void 0;a=t(this).attr(s.attribute)}else a=t(this).text(),t(this).find("img[alt]").each(function(){a+=t(this).attr("alt")});if("string"==typeof a){a=e.cleanString(a);var n=/^([0-9]*)(k|kb|mb|k bytes|k byte)$/g,o=n.exec(a.toLowerCase());o&&o[0].length?e.testFails(i,t(this)):s.empty&&e.isUnreadable(a)?e.testFails(i,t(this)):e.strings.placeholders.indexOf(a)>-1&&e.testFails(i,t(this))}else s.empty&&"number"!=typeof a&&e.testFails(i,t(this))})},labelProximityTest:function(i,s){e.html.find(s.selector).each(function(){var s=e.html.find("label[for="+t(this).attr("id")+"]").first();s.length||e.testFails(i,t(this)),t(this).parent().is(s.parent())||e.testFails(i,t(this))})},colorTest:function(i,s){if(s.bodyForegroundAttribute&&s.bodyBackgroundAttribute){var a=e.html.find("body").clone(!1,!1),n=a.attr(s.bodyForegroundAttribute),o=a.attr(s.bodyBackgroundAttribute);n===void 0&&(n="rgb(0,0,0)"),o===void 0&&(n="rgb(255,255,255)"),a.css("color",n),a.css("background-color",o),("wcag"===s.algorithm&&!e.colors.passesWCAG(a)||"wai"===s.algorithm&&!e.colors.passesWAI(a))&&e.testFails(i,a)}e.html.find(s.selector).filter(e.textSelector).each(function(){(!e.isUnreadable(t(this).text())&&"wcag"===s.algorithm&&!e.colors.passesWCAG(t(this))||"wai"===s.algorithm&&!e.colors.passesWAI(t(this)))&&e.testFails(i,t(this))})},scriptEventTest:function(i,s){e.loadHasEventListener();var a=s.selector===void 0?e.html.find("body").find("*"):e.html.find(s.selector);a.each(function(){var a=t(this).get(0);t(this).attr(s.searchEvent)?void 0!==s.correspondingEvent&&t(this).attr(s.correspondingEvent)||e.testFails(i,t(this)):!t.hasEventListener(a,s.searchEvent.replace("on",""))||void 0!==s.correspondingEvent&&t.hasEventListener(a,s.correspondingEvent.replace("on",""))||e.testFails(i,t(this))})},labelTest:function(i,s){e.html.find(s.selector).each(function(){t(this).parent("label").length&&e.containsReadableText(t(this).parent("label"))||e.html.find("label[for="+t(this).attr("id")+"]").length&&e.containsReadableText(e.html.find("label[for="+t(this).attr("id")+"]"))||e.testFails(i,t(this))})},containsReadableText:function(i,s){if(i=i.clone(),i.find("option").remove(),!e.isUnreadable(i.text()))return!0;if(!e.isUnreadable(i.attr("alt")))return!0;if(s){var a=!1;if(i.find("*").each(function(){e.containsReadableText(t(this),!0)&&(a=!0)}),a)return!0}return!1},headerOrderTest:function(i,s){var a=parseInt(s.selector.substr(-1,1),10),n=!1;e.html.find("h1, h2, h3, h4, h5, h6").each(function(){var s=parseInt(t(this).get(0).tagName.substr(-1,1),10);n&&(s-1>a||a>s+1)&&e.testFails(i,t(this)),s===a&&(n=t(this)),n&&s!==a&&(n=!1)})},acronymTest:function(i,s){var a={},n={};e.html.find(s+"[title]").each(function(){a[t(this).text().toUpperCase()]=t(this).attr("title")}),e.html.find("p, div, h1, h2, h3, h4, h5").each(function(){var s=t(this),o=t(this).text().split(" ");o.length>1&&t(this).text().toUpperCase()!==t(this).text()&&t.each(o,function(t,o){o=o.replace(/[^a-zA-Zs]/,""),o.toUpperCase()===o&&o.length>1&&a[o.toUpperCase()]===void 0&&(n[o.toUpperCase()]===void 0&&e.testFails(i,s,{acronym:o.toUpperCase()}),n[o.toUpperCase()]=o)})})},aAdjacentWithSameResourceShouldBeCombined:function(){e.html.find("a").each(function(){t(this).next("a").attr("href")===t(this).attr("href")&&e.testFails("aAdjacentWithSameResourceShouldBeCombined",t(this))})},aImgAltNotRepetative:function(){e.html.find("a img[alt]").each(function(){e.cleanString(t(this).attr("alt"))===e.cleanString(t(this).parent("a").text())&&e.testFails("aImgAltNotRepetative",t(this).parent("a"))})},aLinksAreSeperatedByPrintableCharacters:function(){e.html.find("a").each(function(){t(this).next("a").length&&e.isUnreadable(t(this).get(0).nextSibling.wholeText)&&e.testFails("aLinksAreSeperatedByPrintableCharacters",t(this))})},aLinkTextDoesNotBeginWithRedundantWord:function(){var i=e.loadString("redundant");e.html.find("a").each(function(){var s=t(this),a="";t(this).find("img[alt]").length&&(a+=t(this).find("img[alt]:first").attr("alt")),a+=t(this).text(),a=a.toLowerCase(),t.each(i.link,function(t,i){a.search(i)>-1&&e.testFails("aLinkTextDoesNotBeginWithRedundantWord",s)})})},aMustContainText:function(){e.html.find("a").each(function(){e.containsReadableText(t(this),!0)||(t(this).attr("name")||t(this).attr("id"))&&!t(this).attr("href")||e.testFails("aMustContainText",t(this))})},aSuspiciousLinkText:function(){var i=e.loadString("suspicious_links");e.html.find("a").each(function(){var s=t(this).text();t(this).find("img[alt]").each(function(){s+=t(this).attr("alt")}),i.indexOf(e.cleanString(s))>-1&&e.testFails("aSuspiciousLinkText",t(this))})},blockquoteUseForQuotations:function(){e.html.find("p").each(function(){t(this).text().substr(0,1).search(/[\'\"]/)>-1&&t(this).text().substr(-1,1).search(/[\'\"]/)>-1&&e.testFails("blockquoteUseForQuotations",t(this))})},documentAcronymsHaveElement:function(){e.acronymTest("documentAcronymsHaveElement","acronym")},documentAbbrIsUsed:function(){e.acronymTest("documentAbbrIsUsed","abbr")},documentTitleIsShort:function(){e.html.find("head title:first").text().length>150&&e.testFails("documentTitleIsShort",e.html.find("head title:first"))},documentVisualListsAreMarkedUp:function(){var i=[/\*/g,"<br>*","&bull;","&#8226"];e.html.find("p, div, h1, h2, h3, h4, h5, h6").each(function(){var s=t(this);t.each(i,function(t,i){s.text().split(i).length>2&&e.testFails("documentVisualListsAreMarkedUp",s)})})},documentValidatesToDocType:function(){document.doctype===void 0},documentIDsMustBeUnique:function(){var i=[];e.html.find("*[id]").each(function(){i.indexOf(t(this).attr("id"))>=0&&e.testFails("documentIDsMustBeUnique",t(this)),i.push(t(this).attr("id"))})},documentIsWrittenClearly:function(){e.html.find(e.textSelector).each(function(){var i=e.textStatistics.cleanText(t(this).text());60>Math.round(206.835-1.015*e.textStatistics.averageWordsPerSentence(i)-84.6*e.textStatistics.averageSyllablesPerWord(i))&&e.testFails("documentIsWrittenClearly",t(this))})},documentLangIsISO639Standard:function(){var t=e.loadString("language_codes"),i=e.html.find("html").attr("lang");i&&-1===t.indexOf(i)&&e.testFails("documentLangIsISO639Standard",e.html.find("html"))},doctypeProvided:function(){0===t(e.html.get(0).doctype).length&&e.testFails("doctypeProvided",e.html.find("html"))},appletContainsTextEquivalent:function(){e.html.find("applet[alt=], applet:not(applet[alt])").each(function(){e.isUnreadable(t(this).text())&&e.testFails("appletContainsTextEquivalent",t(this))})},documentStrictDocType:function(){t(e.html.get(0).doctype).length&&-1!==e.html.get(0).doctype.systemId.indexOf("strict")||e.testFails("documentStrictDocType",e.html.find("html"))},embedHasAssociatedNoEmbed:function(){e.html.find("noembed").length||e.html.find("embed").each(function(){e.testFails("embedHasAssociatedNoEmbed",t(this))})},emoticonsExcessiveUse:function(){var i=e.loadString("emoticons"),s=0;e.html.find("p, div, h1, h2, h3, h4, h5, h6").each(function(){var a=t(this);t.each(a.text().split(" "),function(t,e){i.indexOf(e)>-1&&s++,s>4}),s>4&&e.testFails("emoticonsExcessiveUse",a)})},emoticonsMissingAbbr:function(){var i=e.loadString("emoticons");e.html.find("p, div, h1, h2, h3, h4, h5, h6").each(function(){var s=t(this),a=s.clone();a.find("abbr, acronym").each(function(){t(this).remove()}),t.each(a.text().split(" "),function(t,a){i.indexOf(a)>-1&&e.testFails("emoticonsMissingAbbr",s)})})},formWithRequiredLabel:function(){var i,s=e.loadString("redundant"),a=!1;s.required[s.required.indexOf("*")]=/\*/g,e.html.find("label").each(function(){var n=t(this).text().toLowerCase(),o=t(this);t.each(s.required,function(t,i){n.search(i)>=0&&!e.html.find("#"+o.attr("for")).attr("aria-required")&&e.testFails("formWithRequiredLabel",o)}),a=o.css("color")+o.css("font-weight")+o.css("background-color"),i&&a!==i&&e.testFails("formWithRequiredLabel",o),i=a})},headersUseToMarkSections:function(){e.html.find("p").each(function(){var i=t(this);i.find("strong:first, em:first, i:first, b:first").each(function(){i.text()===t(this).text()&&e.testFails("headersUseToMarkSections",i)})})},imgAltIsDifferent:function(){e.html.find("img[alt][src]").each(function(){(t(this).attr("src")===t(this).attr("alt")||t(this).attr("src").split("/").pop()===t(this).attr("alt"))&&e.testFails("imgAltIsDifferent",t(this))})},imgAltIsTooLong:function(){e.html.find("img[alt]").each(function(){t(this).attr("alt").length>100&&e.testFails("imgAltIsTooLong",t(this))})},imgAltTextNotRedundant:function(){var i={};e.html.find("img[alt]").each(function(){i[t(this).attr("alt")]===void 0?i[t(this).attr("alt")]=t(this).attr("src"):i[t(this).attr("alt")]!==t(this).attr("src")&&e.testFails("imgAltTextNotRedundant",t(this))})},inputCheckboxRequiresFieldset:function(){e.html.find(":checkbox").each(function(){t(this).parents("fieldset").length||e.testFails("inputCheckboxRequiresFieldset",t(this))})},inputImageAltIsNotFileName:function(){e.html.find("input[type=image][alt]").each(function(){t(this).attr("src")===t(this).attr("alt")&&e.testFails("inputImageAltIsNotFileName",t(this))})},inputImageAltIsShort:function(){e.html.find("input[type=image]").each(function(){t(this).attr("alt").length>100&&e.testFails("inputImageAltIsShort",t(this))})},inputImageAltNotRedundant:function(){var i=e.loadString("redundant");e.html.find("input[type=image][alt]").each(function(){i.inputImage.indexOf(e.cleanString(t(this).attr("alt")))>-1&&e.testFails("inputImageAltNotRedundant",t(this))})},imgImportantNoSpacerAlt:function(){e.html.find("img[alt]").each(function(){var i=t(this).width()?t(this).width():parseInt(t(this).attr("width"),10),s=t(this).height()?t(this).height():parseInt(t(this).attr("height"),10);e.isUnreadable(t(this).attr("alt").trim())&&t(this).attr("alt").length>0&&i>50&&s>50&&e.testFails("imgImportantNoSpacerAlt",t(this))})},imgNonDecorativeHasAlt:function(){e.html.find("img[alt]").each(function(){e.isUnreadable(t(this).attr("alt"))&&(t(this).width()>100||t(this).height()>100)&&e.testFails("imgNonDecorativeHasAlt",t(this))})},imgAltNotEmptyInAnchor:function(){e.html.find("a img").each(function(){e.isUnreadable(t(this).attr("alt"))&&e.isUnreadable(t(this).parent("a:first").text())&&e.testFails("imgAltNotEmptyInAnchor",t(this))})},imgHasLongDesc:function(){e.html.find("img[longdesc]").each(function(){t(this).attr("longdesc")!==t(this).attr("alt")&&e.validURL(t(this).attr("longdesc"))||e.testFails("imgHasLongDesc",t(this))})},imgMapAreasHaveDuplicateLink:function(){var i={};e.html.find("a").each(function(){i[t(this).attr("href")]=t(this).attr("href")}),e.html.find("img[usemap]").each(function(){var s=t(this),a=e.html.find(s.attr("usemap"));a.length||(a=e.html.find('map[name="'+s.attr("usemap").replace("#","")+'"]')),a.length&&a.find("area").each(function(){i[t(this).attr("href")]===void 0&&e.testFails("imgMapAreasHaveDuplicateLink",s)})})},imgGifNoFlicker:function(){e.html.find('img[src$=".gif"]').each(function(){var i=t(this);t.ajax({url:i.attr("src"),async:!1,dataType:"text",success:function(t){-1!==t.search("NETSCAPE2.0")&&e.testFails("imgGifNoFlicker",i)}})})},imgWithMathShouldHaveMathEquivalent:function(){e.html.find("img:not(img:has(math), img:has(tagName))").each(function(){t(this).parent().find("math").length||e.testFails("imgWithMathShouldHaveMathEquivalent",t(this))})},labelMustBeUnique:function(){var i={};e.html.find("label[for]").each(function(){i[t(this).attr("for")]!==void 0&&e.testFails("labelMustBeUnique",t(this)),i[t(this).attr("for")]=t(this).attr("for")})},labelsAreAssignedToAnInput:function(){e.html.find("label").each(function(){t(this).attr("for")?e.html.find("#"+t(this).attr("for")).length&&e.html.find("#"+t(this).attr("for")).is("input, select, textarea")||e.testFails("labelsAreAssignedToAnInput",t(this)):e.testFails("labelsAreAssignedToAnInput",t(this))})},listNotUsedForFormatting:function(){e.html.find("ol, ul").each(function(){2>t(this).find("li").length&&e.testFails("listNotUsedForFormatting",t(this))})},paragarphIsWrittenClearly:function(){e.html.find("p").each(function(){var i=e.textStatistics.cleanText(t(this).text());60>Math.round(206.835-1.015*e.textStatistics.averageWordsPerSentence(i)-84.6*e.textStatistics.averageSyllablesPerWord(i))&&e.testFails("paragarphIsWrittenClearly",t(this))})},siteMap:function(){var i=e.loadString("site_map"),s=!0;e.html.find("a").each(function(){var e=t(this).text().toLowerCase();t.each(i,function(t,i){return e.search(i)>-1?(s=!1,void 0):void 0}),s===!1}),s&&e.testFails("siteMap",e.html.find("body"))},pNotUsedAsHeader:function(){var i={};e.html.find("p").each(function(){if(1>t(this).text().search(".")){var s=t(this);t.each(e.suspectPHeaderTags,function(i,a){s.find(a).length&&s.find(a).each(function(){t(this).text().trim()===s.text().trim()&&e.testFails("pNotUsedAsHeader",s)})}),t.each(e.suspectPCSSStyles,function(t,a){i[a]!==void 0&&i[a]!==s.css(a)&&e.testFails("pNotUsedAsHeader",s),i[a]=s.css(a)}),"bold"===s.css("font-weight")&&e.testFails("pNotUsedAsHeader",s)}})},preShouldNotBeUsedForTabularLayout:function(){e.html.find("pre").each(function(){var i=t(this).text().split(/[\n\r]+/);i.length>1&&t(this).text().search(/\t/)>-1&&e.testFails("preShouldNotBeUsedForTabularLayout",t(this))})},selectJumpMenu:function(){0!==e.html.find("select").length&&(e.loadHasEventListener(),e.html.find("select").each(function(){0===t(this).parent("form").find(":submit").length&&(t.hasEventListener(t(this),"change")||t(this).attr("onchange"))&&e.testFails("selectJumpMenu",t(this))}))},tableHeaderLabelMustBeTerse:function(){e.html.find("th, table tr:first td").each(function(){t(this).text().length>20&&(!t(this).attr("abbr")||t(this).attr("abbr").length>20)&&e.testFails("tableHeaderLabelMustBeTerse",t(this))})},tabIndexFollowsLogicalOrder:function(){var i=0;e.html.find("[tabindex]").each(function(){parseInt(t(this).attr("tabindex"),10)>=0&&parseInt(t(this).attr("tabindex"),10)!==i+1&&e.testFails("tabIndexFollowsLogicalOrder",t(this)),i++})},tableLayoutDataShouldNotHaveTh:function(){e.html.find("table:has(th)").each(function(){e.isDataTable(t(this))||e.testFails("tableLayoutDataShouldNotHaveTh",t(this))})},tableLayoutHasNoSummary:function(){e.html.find("table[summary]").each(function(){e.isDataTable(t(this))||e.isUnreadable(t(this).attr("summary"))||e.testFails("tableLayoutHasNoSummary",t(this))})},tableLayoutHasNoCaption:function(){e.html.find("table:has(caption)").each(function(){e.isDataTable(t(this))||e.testFails("tableLayoutHasNoCaption",t(this))})},tableLayoutMakesSenseLinearized:function(){e.html.find("table").each(function(){e.isDataTable(t(this))||e.testFails("tableLayoutMakesSenseLinearized",t(this))})},tableNotUsedForLayout:function(){e.html.find("table").each(function(){e.isDataTable(t(this))||e.testFails("tableNotUsedForLayout",t(this))})},tableSummaryDoesNotDuplicateCaption:function(){e.html.find("table[summary]:has(caption)").each(function(){e.cleanString(t(this).attr("summary"))===e.cleanString(t(this).find("caption:first").text())&&e.testFails("tableSummaryDoesNotDuplicateCaption",t(this))})},tableSummaryIsNotTooLong:function(){e.html.find("table[summary]").each(function(){t(this).attr("summary").trim().length>100&&e.testFails("tableSummaryIsNotTooLong",t(this))})},tableUsesAbbreviationForHeader:function(){e.html.find("th:not(th[abbr])").each(function(){t(this).text().length>20&&e.testFails("tableUsesAbbreviationForHeader",t(this))})},tableUseColGroup:function(){e.html.find("table").each(function(){e.isDataTable(t(this))&&!t(this).find("colgroup").length&&e.testFails("tableUseColGroup",t(this))})},tableUsesScopeForRow:function(){e.html.find("table").each(function(){t(this).find("td:first-child").each(function(){var i=t(this).next("td");("bold"===t(this).css("font-weight")&&"bold"!==i.css("font-weight")||t(this).find("strong").length&&!i.find("strong").length)&&e.testFails("tableUsesScopeForRow",t(this))}),t(this).find("td:last-child").each(function(){var i=t(this).prev("td");("bold"===t(this).css("font-weight")&&"bold"!==i.css("font-weight")||t(this).find("strong").length&&!i.find("strong").length)&&e.testFails("tableUsesScopeForRow",t(this))})})},tableWithMoreHeadersUseID:function(){e.html.find("table:has(th)").each(function(){var i=t(this),s=0;i.find("tr").each(function(){t(this).find("th").length&&s++,s>1&&!t(this).find("th[id]").length&&e.testFails("tableWithMoreHeadersUseID",i)})})},textIsNotSmall:function(){e.loadPixelToEm(),e.html.find(e.textSelector).each(function(){var i=t(this).css("font-size");i.search("em")>0&&(i=t(this).toPx({scope:e.html})),i=parseInt(i.replace("px",""),10),10>i&&e.testFails("textIsNotSmall",t(this))})},videosEmbeddedOrLinkedNeedCaptions:function(){e.html.find("a").each(function(){var i=t(this);t.each(e.videoServices,function(t,s){s.isVideo(i.attr("href"))&&s.hasCaptions(function(t){t||e.testFails("videosEmbeddedOrLinkedNeedCaptions",i)})})})},tabularDataIsInTable:function(){e.html.find("pre").each(function(){t(this).html().search("	")>=0&&e.testFails("tabularDataIsInTable",t(this))})}};e.statistics={setDecimal:function(t,e){var i=Math.pow(10,e||0);return e?Math.round(i*t)/i:t},average:function(t,i){for(var s=t.length,a=0;s--;)a+=t[s];return e.statistics.setDecimal(a/t.length,i)},variance:function(t,i){for(var s=e.statistics.average(t,i),a=t.length,n=0;a--;)n+=Math.pow(t[a]-s,2);return n/=t.length,e.statistics.setDecimal(n,i)},standardDeviation:function(t,i){var s=Math.sqrt(e.statistics.variance(t,i));return e.statistics.setDecimal(s,i)}},e.colors={getLuminosity:function(t,e){t=this.cleanup(t),e=this.cleanup(e);var i,s,a=t.r/255,n=t.g/255,o=t.b/255,r=.03928>=a?a/12.92:Math.pow((a+.055)/1.055,2.4),l=.03928>=n?n/12.92:Math.pow((n+.055)/1.055,2.4),c=.03928>=o?o/12.92:Math.pow((o+.055)/1.055,2.4),h=e.r/255,u=e.g/255,d=e.b/255,f=.03928>=h?h/12.92:Math.pow((h+.055)/1.055,2.4),m=.03928>=u?u/12.92:Math.pow((u+.055)/1.055,2.4),g=.03928>=d?d/12.92:Math.pow((d+.055)/1.055,2.4);return i=.2126*r+.7152*l+.0722*c,s=.2126*f+.7152*m+.0722*g,Math.round(10*((Math.max(i,s)+.05)/(Math.min(i,s)+.05)))/10},fetchImageColor:function(){var e=new Image,i=t(this).css("background-image").replace("url(","").replace(/'/,"").replace(")","");e.src=i;var s=document.createElement("canvas"),a=s.getContext("2d");a.drawImage(e,0,0);var n=a.getImageData(0,0,1,1).data;return"rgb("+n[0]+","+n[1]+","+n[2]+")"},passesWCAG:function(t){return e.colors.getLuminosity(e.colors.getColor(t,"foreground"),e.colors.getColor(t,"background"))>5},passesWAI:function(t){var i=e.colors.cleanup(e.colors.getColor(t,"foreground")),s=e.colors.cleanup(e.colors.getColor(t,"background"));return e.colors.getWAIErtContrast(i,s)>500&&e.colors.getWAIErtBrightness(i,s)>125},getWAIErtContrast:function(t,i){var s=e.colors.getWAIDiffs(t,i);return s.red+s.green+s.blue},getWAIErtBrightness:function(t,i){var s=e.colors.getWAIDiffs(t,i);return(299*s.red+587*s.green+114*s.blue)/1e3},getWAIDiffs:function(t,e){var i={};return i.red=Math.abs(t.r-e.r),i.green=Math.abs(t.g-e.g),i.blue=Math.abs(t.b-e.b),i},getColor:function(e,i){if("foreground"===i)return e.css("color")?e.css("color"):"rgb(255,255,255)";if("rgba(0, 0, 0, 0)"!==e.css("background-color")&&"transparent"!==e.css("background-color")||"body"===e.get(0).tagName)return e.css("background-color")?e.css("background-color"):"rgb(0,0,0)";var s="rgb(0,0,0)";return e.parents().each(function(){return"rgba(0, 0, 0, 0)"!==t(this).css("background-color")&&"transparent"!==t(this).css("background-color")?(s=t(this).css("background-color"),!1):void 0}),s},cleanup:function(t){return t=t.replace("rgb(","").replace("rgba(","").replace(")","").split(","),{r:t[0],g:t[1],b:t[2],a:t[3]===void 0?!1:t[3]}}},e.textStatistics={cleanText:function(t){return t.replace(/[,:;()\-]/," ").replace(/[\.!?]/,".").replace(/[ ]*(\n|\r\n|\r)[ ]*/," ").replace(/([\.])[\. ]+/,"$1").replace(/[ ]*([\.])/,"$1").replace(/[ ]+/," ").toLowerCase()},sentenceCount:function(t){var e=t;return e.split(".").length+1},wordCount:function(t){var e=t;return e.split(" ").length+1},averageWordsPerSentence:function(t){return e.textStatistics.wordCount(t)/e.textStatistics.sentenceCount(t)},averageSyllablesPerWord:function(i){var s=0,a=e.textStatistics.wordCount(i);return a?(t.each(i.split(" "),function(t,i){s+=e.textStatistics.syllableCount(i)}),s/a):0},syllableCount:function(t){var e=t.replace(/(?:[^laeiouy]es|ed|[^laeiouy]e)$/,"").match(/[aeiouy]{1,2}/g);return e&&0!==e.length?e.length:1}},e.videoServices={youTube:{videoID:"",apiUrl:"http://gdata.youtube.com/feeds/api/videos/?q=%video&caption&v=2&alt=json",isVideo:function(t){var i=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,s=t.match(i);return s&&11===s[7].length?(e.videoServices.youTube.videoID=s[7],!0):!1},hasCaptions:function(e){t.ajax({url:this.apiUrl.replace("%video",this.videoID),async:!1,dataType:"json",success:function(t){e(t.feed.openSearch$totalResults.$t>0?!0:!1)}})}}}})(jQuery);